<!doctype html>
<html lang="hu">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Kávé NPC véletlen mozgás</title>
    <style>
        :root{
          --w: 800px;
          --h: 480px;
          --btn-size: 100px;
        }
        body{
          display:flex;
          align-items:center;
          justify-content:center;
          min-height:100vh;
          margin:0;
          background:linear-gradient(180deg,#fffaf5,#f3e9d9);
          font-family:sans-serif;
        }
        .stage{
          width:var(--w);
          height:var(--h);
          background:#fff8ef;
          border:2px solid #d8c4a8;
          border-radius:12px;
          position:relative;
          overflow:hidden;
          box-shadow:0 10px 25px rgba(0,0,0,0.1);
        }

        .coffee{
          position:absolute;
          width:110px;
          height:auto;
          transform-origin:center;
          transition:transform 0.1s linear;
        }

        .controls{
          position:absolute;
          top:16px;
          right:16px;
          display:flex;
          gap:12px;
        }
        .square-btn{
          width:var(--btn-size);
          height:var(--btn-size);
          background:#fff;
          border-radius:10px;
          border:2px solid #cbb9a7;
          display:flex;
          align-items:center;
          justify-content:center;
          font-weight:600;
          font-size:16px;
          cursor:pointer;
          box-shadow:0 4px 10px rgba(0,0,0,0.1);
          transition:transform 0.1s;
        }
        .square-btn:hover{ transform:scale(1.05); }
    </style>
</head>
<body>
<div class="stage" id="stage">
    <div class="controls">
        <div class="square-btn" id="fiokBtn">Fiók</div>
        <div class="square-btn" id="tanulasBtn">Tanulás</div>
    </div>

    <img src="kave.png" id="coffee" class="coffee" alt="Kávé NPC">
</div>

<script>
    const stage = document.getElementById('stage');
    const coffee = document.getElementById('coffee');

    let posX = 200, posY = 300;
    let dirX = 1;
    let speed = 1.4;
    let step = 0;
    let moving = true;
    let waitTimer = 0;

    function randomWaitTime() {
      // 1–3 másodperc szünetek
      return 1000 + Math.random() * 2000;
    }

    function randomDirection() {
      // véletlenszerűen balra vagy jobbra indul
      dirX = Math.random() < 0.3 ? -1 : 1;
      coffee.style.transform = `scaleX(${dirX})`;
    }

    function animate(timestamp) {
      const stageW = stage.clientWidth;
      const stageH = stage.clientHeight;
      const coffeeW = coffee.clientWidth;
      const coffeeH = coffee.clientHeight;

      if (moving) {
        step += 0.1;
        const verticalBob = Math.sin(step * 4) * 4; // lépegetés
        posX += dirX * speed;

        // falak ellenőrzése
        if (posX <= 0) {
          dirX = 1;
          coffee.style.transform = "scaleX(1)";
        } else if (posX >= stageW - coffeeW) {
          dirX = -1;
          coffee.style.transform = "scaleX(-1)";
        }

        // kávé magassága (padlóhoz igazítva)
        posY = stageH - coffeeH - 10 + verticalBob;

        coffee.style.left = posX + "px";
        coffee.style.top = posY + "px";

        // néha megáll pihenni
        if (Math.random() < 0.002) {
          moving = false;
          waitTimer = performance.now() + randomWaitTime();
        }

      } else {
        // ha várakozik, egy helyben marad
        if (timestamp > waitTimer) {
          moving = true;
          randomDirection();
        }
      }

      requestAnimationFrame(animate);
    }

    // gombok
    document.getElementById('fiokBtn').onclick = () => alert('Fiók megnyitása (helyőrző)');
    document.getElementById('tanulasBtn').onclick = () => alert('Tanulás oldal (helyőrző)');

    // indulás
    coffee.style.left = posX + "px";
    coffee.style.top = posY + "px";
    animate();
</script>
</body>
</html>
